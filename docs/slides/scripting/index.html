<!DOCTYPE html>
<html lang="en"><head>
<link href="../../assets/favicon.svg" rel="icon" type="image/svg+xml">
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/quarto-contrib/reveal-logo-1.0.0/reveal-logo.js" defer="true"></script>
<link href="../../site_libs/quarto-contrib/reveal-logo-1.0.0/reveal-logo.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.31">

  <meta name="author" content="Sebastian DiLorenzo">
  <title>Functions and scripts</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto-91c5df653c6e3b55b45ab52c45f4aa2e.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Mono:wght@400;500;700&amp;family=Nunito:ital,wght@0,200..1000;1,200..1000&amp;display=swap" rel="stylesheet">
<meta property="og:title" content="Functions and scripts">
<meta property="og:description" content="RaukR 2025 • R Beyond the Basics">
<meta property="og:image" content="https://nbisweden.github.io/raukr-2025/slides/scripting/assets/featured.webp">
</head>
<body class="quarto-light">

  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="../../assets/images/cover.webp" data-background-opacity="1" data-background-size="cover" class="center">
  <div class="title-container">

    
    <div class="title-parent title-one">
      <div class="title-child-text">
        <h1 class="title">Functions and scripts</h1>
                <p class="subtitle">RaukR 2025 • R Beyond the Basics</p>
                        <p class="author">Sebastian DiLorenzo</p>
                                <p class="date">04-Jun-2025</p>
              </div>
    </div>
    
  </div>
</section>

<section id="structure-your-code" class="slide level2">
<h2>Structure Your Code</h2>
<p>Decompose the problem 🧩 🧩!</p>
<p><span class="center"><img data-src="assets/Philip-ii-of-macedon.jpg" height="300"> <img data-src="assets/Julius_Ceasar.jpg" height="300"> <img data-src="assets/Napoleon_Bonaparte.jpg" height="300"><br>
<span class="smaller">source: Wikimedia Commons</span><br>
</span></p>
<div class="fragment">
<ul>
<li><em>divide et impera</em> / top-down approach — split your BIG problem into a number of small sub-problems recursively and, <strong>at some level</strong>, encapsulate your code in functional blocks (functions)</li>
</ul>
</div>
</section>
<section id="r-functions" class="slide level2">
<h2>R Functions</h2>
<p><br></p>
<ul>
<li>What is exported from R packages</li>
<li>Perform a set task, preferably that task is not “this whole analysis”</li>
<li>Any code that will be repeated</li>
<li>“One screen rule”</li>
<li>Add less objects to workspace</li>
</ul>
</section>
<section id="r-functions-1" class="slide level2">
<h2>R Functions</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><span style="background-color: #f2d7d5; padding: 5px;"><strong>Without a function</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" data-code-line-numbers="1|2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a>a <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb1-2"><a></a>a <span class="sc">+</span> a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a>b <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb3-2"><a></a>b <span class="sc">+</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
</div>
<ul>
<li>User is performing the operation each time</li>
</ul>
<aside class="notes">
<p>An R function is something you have probably used many times already.. Functions perform a set task within R. Lets looks at a quick example.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div><div class="column" style="width:50%;">
<p><span style="background-color: #d0ece7; padding: 5px;"><strong>With a function</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" data-code-line-numbers="1-3|5-6|9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a>doubleUp <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb5-2"><a></a>  x <span class="sc">+</span> x</span>
<span id="cb5-3"><a></a>}</span>
<span id="cb5-4"><a></a></span>
<span id="cb5-5"><a></a>a <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb5-6"><a></a><span class="fu">doubleUp</span>(a)</span>
<span id="cb5-7"><a></a>b <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb5-8"><a></a><span class="fu">doubleUp</span>(b)</span>
<span id="cb5-9"><a></a>z <span class="ot">&lt;-</span> <span class="fu">doubleUp</span>(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10
[1] 6</code></pre>
</div>
</div>
<ul>
<li>Function is performing the operation each time</li>
</ul>
</div></div>
</section>
<section id="r-functions-2" class="slide level2">
<h2>R Functions</h2>
<p>The pieces that make a function</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a>function_name <span class="ot">&lt;-</span> <span class="cf">function</span>(param1, <span class="at">param2 =</span> <span class="dv">20</span>, ...) {</span>
<span id="cb7-2"><a></a>  param1 <span class="sc">*</span> <span class="dv">2</span> <span class="co"># Operational space</span></span>
<span id="cb7-3"><a></a>  param1 <span class="sc">+</span> param2 <span class="co"># What is returned. Alt, use return(param1+param2)</span></span>
<span id="cb7-4"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><code>function_name</code> : Name of the function</li>
<li><code>function()</code> : Parameters. User input
<ul>
<li><code>param1</code> : No default value. Required.</li>
<li><code>param2 = 20</code> : Default value</li>
<li><code>...</code> : ellipses pass other arguments into function</li>
</ul></li>
<li><code>function(){}</code> : The function body</li>
<li><code>return</code> : the last line or invoked with <code>return()</code> function.</li>
</ul>
<aside class="notes">
<p>A parameter is a variable in the declaration of the function. An argument is the actual value of the variable that gets passed to the function.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>How to add a function to your workspace</p>
<ul>
<li>copy paste</li>
<li><code>source()</code> / <code>library()</code></li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="r-functions-3" class="slide level2">
<h2>R Functions</h2>
<ul>
<li>use <strong>data</strong> as the <strong>very first</strong> parameter for <code>%&gt;%</code> pipes sake:
<ul>
<li><code>myfun &lt;- function(x, param)</code> 🆗</li>
<li><code>myfun &lt;- function(param, x)</code> 🚯</li>
</ul></li>
</ul>
<div class="fragment">
<ul>
<li>set parameters to defaults — better too many parameters than too few:
<ul>
<li><code>myfun &lt;- function(x, seed = 42)</code> 🆗</li>
<li><code>myfun &lt;- function(x, ...)</code> 🚷</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<p><br></p>
<ul>
<li>remember that global defaults can be changed with <code>options</code></li>
</ul>
<aside class="notes">
<p>Global options can influence how functions behave, for example the default number of digits printed in the console.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="wrapper-function" class="slide level2">
<h2>Wrapper function</h2>
<p>If you are re-using functions written by someone else — write a wrapper function around them and use the power of the <code>...</code></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a>my_awesome_plot <span class="ot">&lt;-</span> <span class="cf">function</span>(x, ...) {</span>
<span id="cb8-2"><a></a>  <span class="fu">plot</span>(x,</span>
<span id="cb8-3"><a></a>       <span class="at">col =</span> <span class="st">"red"</span>,</span>
<span id="cb8-4"><a></a>       <span class="at">pch =</span> <span class="dv">19</span>,</span>
<span id="cb8-5"><a></a>       <span class="at">cex.axis =</span> .<span class="dv">7</span>,</span>
<span id="cb8-6"><a></a>       ...)</span>
<span id="cb8-7"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a><span class="fu">my_awesome_plot</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">col =</span> <span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in localWindow(xlim, ylim, log, asp, ...): formal argument "col" matched by multiple actual arguments</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a><span class="fu">my_awesome_plot</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">las =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="index_files/figure-revealjs/wrapper-fn-plot-1.png" width="384"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="r-scripts-as-standalone-tools" class="slide level2">
<h2>R scripts as standalone tools</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><br> <br></p>
<ul>
<li>Data analysis with R is usually performed interactively using e.g.&nbsp;RStudio, VSCode, Positron</li>
<li>Tasks can be executed from the terminal using R scripts</li>
<li>R scripts can form powerful standalone tools</li>
<li>Useful for putting R into a pipeline of tools <br> <code>tool1 | Rscript | tool2 &gt; output</code></li>
</ul>
</div><div class="column" style="width:50%;">
<p><img data-src="assets/pipes.jpg"></p>
</div></div>
<aside class="notes">
<p>Usually when you are <strong>analyzing data</strong> you will use the <strong>interactive view</strong> and try different things going forward. But say that you have figured out something that you want to <strong>do</strong> for <strong>multiple numbers</strong> of datasets?</p>
<p>An Rscript should do <strong>one</strong> thing and do it well. Because of the <strong>power</strong> in that an <strong>R script</strong> can contain <strong>multiple functions</strong>, or “programs”, this one thing can be quite <strong>simple</strong>, or quite <strong>advanced</strong>.</p>
<p>In this case it might be <strong>efficient</strong> to use an <strong>Rscript</strong>. Often Rscripts are used in pipes, which is what I am referencing in this image. Note code is unix commandline.</p>
<p>So USUALLY an rscript is something that is executable, can take some inputs and arguments, and returns something.</p>
<p>Now lets look at those pieces starting with how an rscript can be executed.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="executing-an-r-script" class="slide level2">
<h2>Executing an R script</h2>
<ul>
<li>Interactively: <code>source("myscript.R")</code> in R console</li>
</ul>
<aside class="notes">
<p>One way to execute an Rscript is to use “source myscript.R” from an interactive session which <strong>runs</strong> whatever code is in the R script. So if it has <strong>functions</strong> or wether it <strong>reads</strong> a separate file and creates some new <strong>object</strong>, these will be in your <strong>R environment</strong> after sourcing the script.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="fragment">
<ul>
<li>Command-line: <code>Rscript myscript.R</code></li>
</ul>
<aside class="notes">
<p>You can also run the Rscript from the command line, or terminal. Then we use the command <strong>Rscript</strong>. It used to be not long ago that people used <strong>R CMD batch</strong>, but nowadays people usually use Rscript. Like the source, this will <strong>execute</strong> whichever code is in <strong>myscript.R</strong> but there is <strong>no environment</strong> for the <strong>objects or functions</strong> to pop into so the <strong>code</strong> in this Rscript is probably <strong>different</strong> than one that is intended for <strong>source</strong>.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
<div class="fragment">
<ul>
<li>As executable file: <code>path/myscript.R</code> if:
<ul>
<li>Script is executable: <code>chmod +x myscript.R</code></li>
<li>First line in script is a hashbang e.g.&nbsp;<code>#!/usr/bin/env Rscript</code></li>
<li>Script’s path is included in call or <code>$PATH</code></li>
</ul></li>
</ul>
<aside class="notes">
<p>You can also execute the Rscript <strong>itself</strong>, from terminal. To execute an R script it must <em>meet three requirements</em>. It must be <strong>executable</strong>. It must start with this <strong>special line</strong>, specifying how it is executed if run on its own. If you want to run it without giving path, its folder must be in you $PATH variable.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="providing-arguments-to-an-r-script" class="slide level2">
<h2>Providing arguments to an R script</h2>
<ul>
<li>Passing arguments to the script allows for flexibility in settings and input data</li>
</ul>
<aside class="notes">
<p><strong>Often</strong> when we use an R script, like I mentioned in the <strong>beginning</strong>, we want to <strong>pass multiple files/samples</strong> through it for efficiency reasons. It <strong>doesnt</strong> just have to be <strong>files</strong>, like <strong>functions</strong> it can also be <strong>argument settings.</strong></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="fragment">
<p><code>./myscript.R inputfile.vcf outputfile.vcf</code></p>
<aside class="notes">
<p>Here for example we are using the Rscript as an <strong>executable</strong> file, giving it an <strong>inputfile</strong> and specifying what we want the <strong>outputfile</strong> to be named. Notice that the only way the R script knows what is what is positionally.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
<div class="fragment">
<ul>
<li>Packages are available that support long and short flags</li>
</ul>
<p><code>./myscript.R -i inputfile.vcf -o outputfile.vcf</code></p>
<aside class="notes">
<p><strong>Short flags</strong> are when you give a single dash and usually a shortened version of the keyword, here <em>i for input</em> and <em>o for output</em> for example.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
<div class="fragment">
<p><code>./myscript.R --input inputfile.vcf --output outputfile.vcf</code></p>
<aside class="notes">
<p>And here <strong>long flags</strong> with <em>two dashes</em></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
<div class="fragment">
<p><code>./myscript.R --output inputfile.vcf --input outputfile.vcf</code></p>
<aside class="notes">
<p>A part of the <strong>flexibility</strong> of this is that you can give the flags in <strong>any order</strong>.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
<div class="fragment">
<p><code>./myscript.R --output inputfile.vcf -i inputfile.vcf</code></p>
<aside class="notes">
<p>And you can also <em>mix</em> the <em>long/short flag order and styles</em>. It is the coding in the script that determines how it handles this input.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="parsing-arguments---positional" class="slide level2">
<h2>Parsing arguments - Positional</h2>
<p>Example: <code>./myscript.R inputfile.vcf outputfile.vcf</code></p>
<ul>
<li><code>commandArgs()</code></li>
</ul>
<p>Use <strong>commandArgs()</strong> to capture whatever was <strong>passed</strong> into R as it was <strong>executed</strong>. To be <strong>clear</strong>; this is a command that is <strong>within the Rscript file.</strong></p>
<div class="fragment">
<ul>
<li><code>trailingOnly = TRUE</code></li>
</ul>
<p>Add <code>trailingOnly = TRUE</code> to suppress the first few items and get the arguments <strong>you</strong> passed to the script.</p>
<aside class="notes">
<p>A <strong>standard arg</strong>, but <strong>not default</strong>, that you can use when invoking <code>commandArgs()</code> is <code>trailingOnly = TRUE</code>, which basically tells it to start counting the input from <strong>after</strong> the <strong>Rscript arguments</strong>. As you can see here when we invoke it without this parameter it returns the script itself, in this case R studio. But with it the invocation is clear, there were no trailing command line arguments.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a><span class="fu">commandArgs</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Library/Frameworks/R.framework/Resources/bin/exec/R"
[2] "--no-echo"                                           
[3] "--no-restore"                                        
[4] "--file=/Applications/quarto/share/rmd/rmd.R"         </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a><span class="fu">commandArgs</span>(<span class="at">trailingOnly =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>character(0)</code></pre>
</div>
</div>
</div>
</section>
<section id="parsing-arguments---flags" class="slide level2">
<h2>Parsing arguments - Flags</h2>
<p>Example: <code>./myscript.R --input inputfile.vcf --output outputfile.vcf</code></p>
<aside class="notes">
<p>So how do we do it with <strong>flags</strong>?</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="fragment">
<ul>
<li>Several packages are available: <code>getopt</code>, <code>optparse</code>, <code>argparser</code>, …</li>
</ul>
</div>
<div class="fragment">
<p>Define set of possible arguments at start of script:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a></a><span class="fu">library</span>(optparse)</span>
<span id="cb16-2"><a></a>my_options <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb16-3"><a></a>  <span class="fu">make_option</span>(<span class="fu">c</span>(<span class="st">"-i"</span>, <span class="st">"--inputfile"</span>), <span class="at">default =</span> <span class="st">"variants.vcf"</span>),</span>
<span id="cb16-4"><a></a>  <span class="fu">make_option</span>(<span class="fu">c</span>(<span class="st">"-o"</span>, <span class="st">"--outputfile"</span>), <span class="at">default =</span> <span class="st">"variants_filtered.vcf"</span>)</span>
<span id="cb16-5"><a></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<aside class="notes">
<p>If we use <strong>optparse</strong> as an example you <strong>create</strong> your options using the <strong>make_option</strong> command, and can set default values. We see also that you can give both long and short form here.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
<div class="fragment">
<p>Parse arguments using your definition:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a><span class="fu">parse_args</span>(<span class="fu">OptionParser</span>(<span class="at">option_list =</span> my_options))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$inputfile
[1] "variants.vcf"

$outputfile
[1] "variants_filtered.vcf"

$help
[1] FALSE</code></pre>
</div>
</div>
<aside class="notes">
<p>And then you use the <strong>my_options</strong> object we defined together with <strong>parse_args and OptionParser</strong> to <strong>check our input</strong> for those <strong>flags</strong> We also see an option, <strong>help</strong>, that we did not make, this is a <strong>standard flag</strong> that optparse always looks for and can generate what arguments it is looking for.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="text-streams" class="slide level2">
<h2>Text streams</h2>
<ul>
<li>Text streams allow for piping of data through a set of applications without writing intermediate files.</li>
</ul>
<aside class="notes">
<p>What I am sure most of you will think of when you read this is the bash pipe sign.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="fragment">
<p><code>samtools mpileup -uf ref.fa aln.bam | bcftools call -mv | myPythonscript.py | myRscript.R &gt; variants.vcf</code></p>
<aside class="notes">
<p>So how does R handle taking input piped to it. And the answer is that we have to write some special code if this is the use case.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
<div class="fragment">
<h3 id="reading">Reading</h3>
<ul>
<li>To define and open a connection, read one line, and close it:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a>input_con  <span class="ot">&lt;-</span> <span class="fu">file</span>(<span class="st">"stdin"</span>)</span>
<span id="cb19-2"><a></a><span class="fu">open</span>(input_con)</span>
<span id="cb19-3"><a></a>oneline<span class="ot">=</span><span class="fu">readLines</span>(input_con, <span class="at">n =</span> <span class="dv">1</span>)</span>
<span id="cb19-4"><a></a><span class="fu">close</span>(input_con)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Tidyverse can read a <code>tibble</code> from text stream: <code>read_csv(file("stdin"))</code></li>
</ul>
<aside class="notes">
<p>What we do is <strong>open</strong> a connection from <strong>standard input</strong> and then read this <strong>text stream</strong> for <strong>n</strong> number of lines at a time. It is also good to close this connection afterwards.</p>
<p>Alternatively you can read a text stream into a <strong>tibble</strong> from tidyverse by using <strong>read_csv</strong>, note that it isnt <strong>read.csv</strong> the generic R command, which can take our <strong>input connection</strong> and create the tibble in R.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="text-streams-1" class="slide level2">
<h2>Text streams</h2>
<h4 id="writing">Writing</h4>
<ul>
<li><p>Any <code>stdout</code> produced by the code (<code>print()</code>, <code>cat()</code>, etc) can be piped to a new process: <code>./myRscript.R | myNewScript</code></p></li>
<li><p>or written to a file: <code>./myRscript.R &gt; output.csv</code></p></li>
<li><p>To write a <code>tibble</code> as a text stream: <code>cat(format_csv(my_tibble))</code></p></li>
</ul>
<aside class="notes">
<p>What about <strong>piping from</strong> your R script to something else? Continuing the stream? So just writing these commands. print, cat etc, can be piped to a new process.</p>
<p>If you already have a tibble, you can stream it out of R using this command.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="summary" class="slide level2">
<h2>Summary</h2>
<!-- ![](http://www.azquotes.com/picture-quotes/quote-this-is-the-unix-philosophy-write-programs-that-do-one-thing-and-do-it-well-write-programs-douglas-mcilroy-81-95-07.jpg) -->
<ul>
<li>Functions are great for organizing code and repeating tasks</li>
<li>R scripts are great for performing tasks from command-line</li>
<li>R scripts can be built in different ways to take arguments or text streams</li>
</ul>
<aside class="notes">
<p>So to summarize, R scripts are powerful tools to solve a specific problem that you define, and often fit well together with other tools. And now you have learned to execute them in different ways, with inputs and outputs and with other programs. All that is left is to actually write the content.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="section-1" class="slide level2" data-background-image="../../assets/images/cover.webp">
<h2></h2>
<div class="v-center center">
<div>
<p><span class="largest">Thank you!</span></p>
<p><span class="larger">Questions?</span></p>
<p><span class="smaller">2025 • <a href="https://www.scilifelab.se/">SciLifeLab</a> • <a href="https://nbis.se/">NBIS</a> • <a href="https://nbisweden.github.io/raukr-2025">RaukR</a></span></p>
</div>
</div>


<div class="reveal-header">
<div class="header-logo-left">
<a href="https://nbisweden.github.io/raukr-2025/slides/index.html"><img data-src="../../assets/logos/raukr.svg" style="height:25px;max-width:none;"></a>
</div>
<div class="header-logo-right">
<a href="https://nbisweden.github.io/raukr-2025/home_contents.html"><img data-src="../../assets/logos/nbis-scilifelab.svg" style="height:25px;max-width:none;"></a>
</div>
</div>
</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'fast',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1280,

        height: 720,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp("https:\/\/nbisweden\.github\.io\/raukr-2025\/");
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>